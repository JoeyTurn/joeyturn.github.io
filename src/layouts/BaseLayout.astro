---
import "katex/dist/katex.min.css";
const { title = "Joey Turnbull", noindex = false } = Astro.props;
const pathname = Astro.url.pathname;
const isActive = (href: string): boolean => pathname === href || (href !== "/" && pathname.startsWith(href + "/"));
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <!-- ...existing meta... -->
    <!-- <link rel="icon" href="/favicon.svg" type="image/svg+xml" /> -->
    <link rel="icon" href="/happyfrog.png" sizes="any" />
    <link rel="apple-touch-icon" href="/happyfrog.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="theme-color" content="#eee6d7" />

    <style>
        :root { --bg:#eee6d7; --text:#0a0a0a; --rule: rgba(0,0,0,.12);}
        html, body { margin:0; padding:0; }
        body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color: var(--text); background: var(--bg); line-height: 1.6; }
        header { display:flex; align-items:center; justify-content:space-between; padding:16px 24px; 
                border-bottom: 2px solid var(--rule);}
        header a { color:inherit; text-decoration:none; font-weight:600; }
        nav a { margin-left:24px; }
        main { max-width:1100px; margin:0 auto; padding:24px; }
        h1 { font-size:clamp(36px,6vw,64px); margin:24px 0; }
        h2 { font-size:32px; margin-top:32px; }
        ul { padding-left:24px; }
        .section-hr{
            border:0;
            border-top:1px solid var(--rule);
            margin:32px 0;
        }

        /* .pager{
            display:flex; justify-content:space-between; gap:12px; margin-top:40px;
            padding-top:16px; border-top:1px solid var(--rule);
        } */
        .meta { opacity:.7; font-size:.95rem; margin:.5rem 0 1.25rem; }

        .references { 
        margin-top: 1.75rem;
        font-size: 0.98rem;
        }
        .references ol { margin: 0; padding-left: 1.25rem; }
        .references li { margin: 0 0 0.8rem 0; line-height: 1.5; }
        .references > * + * { margin-top: 0.8rem; }
        .references li {
        list-style-position: outside;
        padding-left: 1.5rem;      /* indent text */
        text-indent: -1.5rem;      /* pull number back out */
        }
        .references a { word-break: break-word; }
    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <header class="site-header">
      <a href="/">Joey Turnbull</a>
       <nav class="nav">
        <a class={`nav-btn ${isActive("/projects") ? "is-active" : ""}`} href="/projects">
          <i class="fas fa-atom" aria-hidden="true"></i>
          <span>Research</span>
        </a>

        <a class={`nav-btn ${isActive("/blog") ? "is-active" : ""}`} href="/blog">
          <i class="fas fa-pen-nib" aria-hidden="true"></i>
          <span>Blog</span>
        </a>

        <a class={`nav-btn ${isActive("/personal") ? "is-active" : ""}`} href="/personal">
          <i class="fas fa-frog" aria-hidden="true"></i>
          <span>Personal</span>
        </a>
      </nav>
    </header>
    <style>
      .site-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:1rem;
      padding:0.75rem 1rem;
      flex-wrap: wrap;              /* key: prevents horizontal overflow */
      }

      .nav{
        display:flex;
        align-items:center;
        gap:0.75rem;
        flex-wrap: wrap;              /* key: allow nav items to wrap */
        justify-content: flex-end;
      }

      :global(.site-header .nav .nav-btn){
        display:inline-flex;
        align-items:center;
        gap:0.55rem;
        padding:0.55rem 0.85rem;
        border-radius: 999px / 70%;
        text-decoration:none;
        color: inherit;

        background: transparent;
        border: 1px solid transparent;
        box-shadow: none;
        opacity: 0.92;

        transition: transform 120ms ease, background 120ms ease, box-shadow 120ms ease,
                    border-color 120ms ease, opacity 120ms ease;
        white-space: nowrap;          /* keep icon+label together */
      }

      :global(.site-header .nav .nav-btn:hover),
      :global(.site-header .nav .nav-btn:focus-visible){
        transform: translateY(-1px);
        opacity: 1;
        background: rgba(0,0,0,0.08);
        border-color: rgba(0,0,0,0.14);
        box-shadow: 0 6px 18px rgba(0,0,0,0.10);
        outline: none;
      }

      :global(.site-header .nav .nav-btn.is-active){
        opacity: 1;
        background: rgba(0,0,0,0.10);
        border-color: rgba(0,0,0,0.18);
        box-shadow: 0 0 0 2px rgba(0,0,0,0.10) inset;
        font-weight: 600;
      }

      /* --- Mobile: smaller tabs + no hover affordance needed --- */
      @media (max-width: 640px){
        .site-header{
          padding: 0.6rem 0.75rem;
          gap: 0.5rem;
        }

        .nav{
          gap: 0.35rem;
          justify-content: flex-start; /* usually feels better on mobile */
          width: 100%;
        }

        :global(.site-header .nav .nav-btn){
          padding: 0.38rem 0.55rem;
          gap: 0.35rem;
          font-size: 0.95rem;
          border-radius: 16px;
        }

        :global(.site-header .nav .nav-btn i){
          font-size: 0.95em;
        }

        /* On touch devices, hover can get “stuck”; just neutralize it */
        :global(.site-header .nav .nav-btn:hover){
          transform: none;
          background: transparent;
          border-color: transparent;
          box-shadow: none;
          opacity: 1;
        }
      }
      .site-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:1rem;
      padding:0.75rem 1rem;
      }

      .nav{
        display:flex;
        align-items:center;
        gap:0.75rem;
      }

      /* Invisible by default */
      :global(.site-header .nav .nav-btn){
        display:inline-flex;
        align-items:center;
        gap:0.55rem;

        padding:0.55rem 0.85rem;
        border-radius: 999px / 70%;
        text-decoration:none;
        color: inherit;

        background: transparent;
        border: 1px solid transparent;
        box-shadow: none;

        /* subtle “it’s clickable” cue without a box */
        opacity: 0.92;

        transition:
          transform 120ms ease,
          background 120ms ease,
          box-shadow 120ms ease,
          border-color 120ms ease,
          opacity 120ms ease;
      }

      :global(.site-header .nav .nav-btn i){
        font-size: 0.95em;
        opacity: 0.9;
      }

      /* Appears on hover/focus */
      :global(.site-header .nav .nav-btn:hover),
      :global(.site-header .nav .nav-btn:focus-visible){
        transform: translateY(-1px);
        opacity: 1;

        background: rgba(0,0,0,0.08);
        border-color: rgba(0,0,0,0.14);
        box-shadow: 0 6px 18px rgba(0,0,0,0.10);

        outline: none;
      }

      :global(.site-header .nav .nav-btn:active){
        transform: translateY(0px);
        box-shadow: none;
      }

      /* Keep current page highlighted even when not hovered */
      :global(.site-header .nav .nav-btn.is-active){
        opacity: 1;
        background: rgba(0,0,0,0.10);
        border-color: rgba(0,0,0,0.18);
        box-shadow: 0 0 0 2px rgba(0,0,0,0.10) inset;
        font-weight: 600;
      }
    </style>
    <main>
      <slot />
    </main>
  </body>
</html>